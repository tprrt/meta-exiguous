#
# -*- coding: utf-8; tab-width: 4; c-basic-offset: 4; indent-tabs-mode: nil -*-

#@TYPE: Machine
#@NAME: Laptop Thinkpad X220

#@DESCRIPTION:
# - Intel i5-2540M
# - DDR3 8go
# - SSD Samsung 830 64go

require conf/machine/include/meta-intel.inc
require conf/machine/include/intel-corei7-64-common.inc
require conf/machine/include/intel-common-pkgarch.inc

# -----------------------------------------------------------------------------
#
# -----------------------------------------------------------------------------

MACHINE_FEATURES_append = " pcbios efi va-impl-intel intel-ucode wifi bluetooth"
MACHINE_FEATURES_remove = "3g nfc screen keyboard alsa usbgadget"

MACHINE_HWCODECS = "va-intel gstreamer-vaapi-1.0"

MACHINE_EXTRA_RRECOMMENDS_append = " linux-firmware lms8"

XSERVER = ""

SYSLINUX_OPTS = "serial 0 115200"
SERIAL_CONSOLE = "115200 ttyS0"
SERIAL_CONSOLES = "115200;ttyS0"
APPEND += "console=ttyS0,115200 console=tty0"

#Since intel-common-standard.scc turn on CONFIG_FB_EFI
#This Kernel Option is required in order to disable FB-EFI
#If not the SATO image will be freezed.
APPEND += "video=efifb:off"

# -----------------------------------------------------------------------------
#
# -----------------------------------------------------------------------------

MACHINEOVERRIDES = "corei7-64-intel-common:tupi-x220"

PREFERRED_PROVIDER_virtual/kernel = "linux-yocto"
PREFERRED_VERSION_linux-yocto = "4.1%"
